shiro sso 客户端安装要点：
1. pom.xml添加依赖：
	<dependency>
        <groupId>org.apache.shiro</groupId>
        <artifactId>shiro-cas</artifactId>
        <version>${shiro-version}</version>
    </dependency>

2. web.xml添加登出listener和filter，用于监听sso 服务器发出的登出通知：
	<listener>
        <listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class>
    </listener>
    <filter>
        <filter-name>singleSignOutFilter</filter-name>
        <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>singleSignOutFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

3. 修改realm 直接继承org.apache.shiro.cas.CasRealm，并重写认证和授权方法。

4. 配置CasRealm bean，加入：
	<!-- cas服务端地址前缀 -->
    <property name="casServerUrlPrefix" value="${shiro.cas.serverUrlPrefix}" />
    <!-- 应用服务地址，用来接收cas服务端票据 -->
    <property name="casService" value="${shiro.cas.service}" />

5. 配置sessionManager bean 的 sessionIdCookie:    
	<property name="sessionIdCookie">
        <bean class="org.apache.shiro.web.servlet.SimpleCookie">
            <!-- 此处设置cookie name避免与默认一致，原因是shiro sso ticket验证会导致重复重定向 -->
            <constructor-arg value="sid"/>
            <property name="httpOnly" value="true"/>
            <property name="maxAge" value="-1"/>
        </bean>
    </property>

6. 配置securityManager，加入：
	<!-- 如果要实现cas的remember me的功能，需要用到下面这个bean，并设置到securityManager的subjectFactory中 -->
    <property name="subjectFactory">
        <bean class="org.apache.shiro.cas.CasSubjectFactory"></bean>
    </property>

7. 配置shiroFilter bean，加入：
	<property name="filters">
        <map>
            <!-- 添加cas filter到shiroFilter -->
            <entry key="casFilter">
                <bean class="org.apache.shiro.cas.CasFilter">
                    <property name="failureUrl" value="${shiro.failureUrl}" />
                    <property name="successUrl" value="${shiro.successUrl}" />
                </bean>
            </entry>
            <!-- 登出交于cas 的logout处理-->
            <entry key="logoutFilter">
                <bean class="org.apache.shiro.web.filter.authc.LogoutFilter">
                    <!-- 配置验证错误时的失败页面 -->
                    <property name="redirectUrl" value="${shiro.logoutUrl}" />
                </bean>
            </entry>
        </map>
    </property>

 详细配置见代码

